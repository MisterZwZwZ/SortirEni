<div  id="content">
    <table class="table">
        <thead>
        <tr class="table-dark">
            <th>Nom de la sortie</th>
            <th>Date de la sortie</th>
            <th>Clôture</th>
            <th>Inscrits/Places</th>
            <th>Etat</th>
            <th>Inscrit</th>
            <th>Organisateur</th>
            <th>Actions</th>
        </tr>


        </thead>
        <tbody>
        {% for sorties in listeSorties %}
            {% if  sorties.etatSortie.getId == 1 %}
                <tr class="table-default">
            {% elseif  sorties.etatSortie.getId == 2 %}
                <tr class="table-success">
            {% elseif  sorties.etatSortie.getId == 3 %}
                <tr class="table-danger">
            {% elseif  sorties.etatSortie.getId == 4 %}
                <tr class="table-info">
            {% elseif  sorties.etatSortie.getId == 5 %}
                <tr class="table-warning">
            {% elseif  sorties.etatSortie.getId == 6 %}
                <tr class="table-warning">
            {% endif %}
            <th scope="row">{{ sorties.nom }}</th>
            <td>{{ sorties.dateHeureDebut|date('d/m/y')}}</td>
            <td>{{ sorties.dateLimiteInscription|date('d/m/y') }}</td>
            <td>{{ sorties.listeDesInscrits | length }}/{{ sorties.nbIncriptionsMax }}</td>
            <td>{{ sorties.etatSortie.libelle}}</td>
            <td>
                {% set inscrit = 'false' %}
                {% for userInscrit in sorties.listeDesInscrits %}
                    {% if userInscrit.id == app.user.id %}
                        {% set inscrit = 'true' %}
                        X
                    {% endif %}
                {% endfor %}
            </td>
            <td>  <a href="{{ path('profil_afficher', {'id': sorties.organisateur.id }) }}">{{ sorties.organisateur.pseudo}}</a></td>
            <td>
                {% if date() <= sorties.dateLimiteInscription %}
                    {% if sorties.etatSortie.getId != 6 %}
                        {% with %}
                            {% if sorties.listeDesInscrits|length < sorties.nbIncriptionsMax %}
                                {% if inscrit == 'true' %}
                                    <a href={{ url('default_desinscription',{'id': sorties.id }) }}>Se désinscrire -</a>
                                {% else %}
                                    <a href={{ url('default_inscription',{'id': sorties.id }) }}>S'incrire -</a>
                                {% endif %}
                            {% else %}
                                Complet -
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                {% endif %}
                {% if app.user.id == sorties.organisateur.id %}
                    <a href="{{ path('sortie_edit', {'id':sorties.id}) }}">Modifier -</a>
                {% endif %}
                {% if app.user.id == sorties.organisateur.id %}
                    {% if sorties.etatSortie.getId == 2 or sorties.etatSortie.getId == 3 %}
                        <a href="{{ path('sortie_annuler', {'id': sorties.id }) }}">Annuler -</a>
                    {% endif %}
                {% endif %}
                <a href="{{ path('sortie_show',{'id': sorties.id}) }}">Afficher</a>
            </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>